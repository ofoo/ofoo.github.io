<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaWeb笔记 | 音神的博客</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="音神的技术博客">
    
    <link rel="preload" href="/assets/css/0.styles.7cfabf05.css" as="style"><link rel="preload" href="/assets/js/app.823cdb10.js" as="script"><link rel="preload" href="/assets/js/2.7e250be9.js" as="script"><link rel="preload" href="/assets/js/12.faba2b4f.js" as="script"><link rel="prefetch" href="/assets/js/10.d8d5a19d.js"><link rel="prefetch" href="/assets/js/11.c5cbdd5d.js"><link rel="prefetch" href="/assets/js/13.de0eb6b5.js"><link rel="prefetch" href="/assets/js/14.3a77ae85.js"><link rel="prefetch" href="/assets/js/15.f11a9999.js"><link rel="prefetch" href="/assets/js/16.472184a2.js"><link rel="prefetch" href="/assets/js/3.d20c8fbe.js"><link rel="prefetch" href="/assets/js/4.f461ebef.js"><link rel="prefetch" href="/assets/js/5.eae3f1ee.js"><link rel="prefetch" href="/assets/js/6.82a11e63.js"><link rel="prefetch" href="/assets/js/7.a72930fd.js"><link rel="prefetch" href="/assets/js/8.333253e0.js"><link rel="prefetch" href="/assets/js/9.7a20fc6b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7cfabf05.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.jpg" alt="音神的博客" class="logo"> <span class="site-name can-hide">音神的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Linux
</a></div><div class="nav-item"><a href="/Git.html" class="nav-link">
  Git
</a></div><div class="nav-item"><a href="/Java.html" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/JavaWeb.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  JavaWeb
</a></div><div class="nav-item"><a href="/MySQL.html" class="nav-link">
  MySQL
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Linux
</a></div><div class="nav-item"><a href="/Git.html" class="nav-link">
  Git
</a></div><div class="nav-item"><a href="/Java.html" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/JavaWeb.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  JavaWeb
</a></div><div class="nav-item"><a href="/MySQL.html" class="nav-link">
  MySQL
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>JavaWeb笔记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaWeb.html#javaweb性能调优" class="sidebar-link">JavaWeb性能调优</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaWeb.html#自顶向下" class="sidebar-link">自顶向下</a></li><li class="sidebar-sub-header"><a href="/JavaWeb.html#自底向上" class="sidebar-link">自底向上</a></li></ul></li><li><a href="/JavaWeb.html#图解http" class="sidebar-link">图解HTTP</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/JavaWeb.html#java-string-lastindexof的使用" class="sidebar-link">Java String.lastIndexOf的使用</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="javaweb笔记"><a href="#javaweb笔记" class="header-anchor">#</a> JavaWeb笔记</h1> <h2 id="javaweb性能调优"><a href="#javaweb性能调优" class="header-anchor">#</a> JavaWeb性能调优</h2> <p>现代大规模关键性系统中的Java性能调优，是一项富有挑战的任务。你需要关注各种问题，包括算法结构、内存分配模式以及磁盘和文件I/O的使用方式。性能调优最困难的是找出问题，即便是经验丰富的人也会被他们的直觉所误导。性能杀手总是隐藏在最意想不到的地方。</p> <h3 id="自顶向下"><a href="#自顶向下" class="header-anchor">#</a> 自顶向下</h3> <p>监控的范围包括操作系统、Java虚拟机、JavaEE容器以及应用的性能测量统计指标。基于监控信息所给出的提示再开展下一步工作，例如JVM垃圾收集器调优、JVM命令行选项调优、操作系统调优，或者应用程序性能分析。性能分析可能导致应用程序的更改，或者发现第三方库或Java SE类库在实现上的不足。</p> <h3 id="自底向上"><a href="#自底向上" class="header-anchor">#</a> 自底向上</h3> <p>自底向上需要收集和监控最底层CPU的性能统计数据。监控的CPU统计数据包括执行特定任务所需要的CPU指令数（通常称为路径长度，Path Length），以及应用在一定负载下运行时的CPU高速缓存未命中率。虽然还有其他重要的CPU统计数据，但这两项是自底向上中最常用的。在一定负载下，应用执行和扩展所需的CPU指令越少，运行得就越快。</p> <p>降低CPU高速缓存未命中率也能改善应用的性能，因为CPU高速缓存未命中会导致CPU为了等待从内存获取数据而浪费若干个周期，而降低CPU高速缓存未命中率，意味着CPU可以减少等待内存数据的时间，应用就能运行得更快。</p> <p>自底向上关注的通常是在不更改应用的前提下，改善CPU使用率。</p> <p>现代Java虚拟机集成了成熟的JIT编译器，可以在Java应用的执行过程中进行优化，比如依据应用的内存访问模式或应用特定的代码路径，生成更有效地机器码。也可以调整操作系统的设置来改善性能，例如更改CPU调度算法，或者修改操作系统的等待时间（操作系统在将应用执行线程迁移到其他CPU硬件线程之前所花费的时间）。</p> <p>如果你觉得可以用自底向上的方法，那应该先从收集操作系统JVM的统计数据开始。</p> <p>我们会请专家来帮助改善应用性能，他们有时会发现，性能差只是因为应用运行的CPU架构或系统不合适。引入多核和每核多硬件线程（也称为CMT,Chip Multithreading）以后，CPU架构和系统已经发生了天翻地覆的变化，因此为特定应用选择正确的平台和CPU架构就显得尤为重要了。</p> <h2 id="图解http"><a href="#图解http" class="header-anchor">#</a> 图解HTTP</h2> <p>Web 使用一种名为 HTTP（HyperText Transfer Protocol，超文本传输协议）的协议作为规范，完成从客户端到服务器端等一系列运作流程。而协议是指规则的约定。可以说，Web 是建立在 HTTP 协议上通信的。</p> <p>通常使用的网络（包括互联网）是在 TCP/IP 协议族的基础上运作的。而 HTTP 属于它内部的一个子集。</p> <p>TCP/IP 协议族按层次分别分为以下 4 层：应用层、传输层、网络层和数据链路层。</p> <ul><li><strong>应用层：</strong> 应用层决定了向用户提供应用服务时通信的活动。</li> <li><strong>传输层：</strong> 传输层对上层应用层，提供处于网络连接中的两台计算机之间的数据传输。</li> <li><strong>网络层（又名网络互连层）：</strong> 网络层用来处理在网络上流动的数据包。</li> <li><strong>链路层（又名数据链路层，网络接口层）：</strong> 用来处理连接网络的硬件部分。</li></ul> <p>利用 TCP/IP 协议族进行网络通信时，会通过分层顺序与对方进行通信。发送端从应用层往下走，接收端则往应用层往上走。</p> <p>发送端在层与层之间传输数据时，每经过一层时必定会被打上一个该层所属的首部信息。反之，接收端在层与层传输数据时，每经过一层时会把对应的首部消去。</p> <h2 id="java-string-lastindexof的使用"><a href="#java-string-lastindexof的使用" class="header-anchor">#</a> Java String.lastIndexOf的使用</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token string">&quot;/testing/testingPaper?id=70&amp;planId=430&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">&quot;=&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出34</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">34</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出&quot;/testing/testingPaper?id=70&amp;planId&quot;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">34</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出&quot;/testing/testingPaper?id=70&amp;planId=&quot;</span>
</code></pre></div><p><code>lastIndexOf</code>获取的等号（=）索引值在截取时，获取的值是不包含等号（=）的，需要+1才可以获取到等号（=）的值</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.823cdb10.js" defer></script><script src="/assets/js/2.7e250be9.js" defer></script><script src="/assets/js/12.faba2b4f.js" defer></script>
  </body>
</html>
